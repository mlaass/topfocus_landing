{{ $screenshots := .screenshots }}
{{ $id := .id }}
{{ $title := .title }}

{{ with $screenshots }}
<div class="mb-12">
  <h3 class="text-2xl font-semibold mb-6 text-gray-800">Screenshots</h3>
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    {{ range $index, $screenshot := . }}
    <img src="{{ $screenshot.src }}" alt="{{ $screenshot.alt }}" 
         class="gallery-thumbnail rounded-lg shadow-md w-full object-cover cursor-pointer hover:shadow-lg transition-shadow duration-300"
         data-gallery-id="{{ $id }}"
         data-image-index="{{ $index }}"
         onerror="this.onerror=null; this.src='https://placehold.co/800x600/cccccc/333333?text=Image+Not+Found';">
    {{ end }}
  </div>
</div>

<!-- Modal Gallery -->
<div id="imageModal_{{ $id }}" class="gallery-modal fixed inset-0 bg-black bg-opacity-90 z-50 hidden flex items-center justify-center">
  <div class="relative max-w-full max-h-full p-4">
    <!-- Project Title -->
    <div class="absolute top-4 left-4 text-white text-lg font-semibold bg-black bg-opacity-50 px-3 py-1 rounded">
      {{ $title }}
    </div>
    
    <!-- Close Button -->
    <button class="gallery-close absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
    
    <!-- Navigation Buttons -->
    <button class="gallery-prev absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 transition-all duration-200">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
    </button>
    
    <button class="gallery-next absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 transition-all duration-200">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </button>
    
    <!-- Main Image -->
    <img id="modalImage_{{ $id }}" class="gallery-image max-w-full max-h-full object-contain" src="" alt="">
    
    <!-- Image Counter -->
    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-50 px-3 py-1 rounded">
      <span id="imageCounter_{{ $id }}" class="gallery-counter">1 / 1</span>
    </div>
  </div>
  
  <!-- Hidden data for JavaScript -->
  <script type="application/json" class="gallery-data" data-gallery-id="{{ $id }}">
    {
      "id": "{{ $id }}",
      "title": "{{ $title }}",
      "screenshots": [
        {{ range $index, $screenshot := $screenshots }}
        {
          "src": "{{ $screenshot.src }}",
          "alt": "{{ $screenshot.alt }}"
        }{{ if ne $index (sub (len $screenshots) 1) }},{{ end }}
        {{ end }}
      ]
    }
  </script>
</div>
{{ end }}
